<?php
//include drupal_get_path('module', 'cassie').'/Cassie.class.php';



	class RuleEngine {
            //check for amount of visits per item category, duration of stay per page, OS, location and language.
            public $local_Language = "";
            public $Location = "Finland";
            public $local_OS = "";
            public $local_VisitsInWebstore;


	    public function getProducts($os){

	    }

            public function init($VisitsInWebstore, $Language, $OS) {
                //set local params


                global $local_Language, $local_VisitsInWebstore, $local_OS;

                $local_Language = $Language;
                $local_VisitsInWebstore = VisitsInWebstore;
		$local_OS = OS;

                $segmentTargeting = self::SegmentTargeting();
                return $segmentTargeting;
            }

            public function SegmentTargeting() {
	        //target certain items for user viewing based on standalone parameters
                //if parameter1 == smth, target this item1 for presentation
                //if parameter2 == smth, target this item2 for presentation
		$Segments = [
                	"priorityHigh" => 0,		//has over 30 visits on the site, gets extra items in selection
			"expensivePhones" => 0,		//has an expensive phone, gets offers for more expensive phones
                	"highSpender" => 0,		//is a high amount of visits and has an expensive phone. Gets more expensive recommendations in general.
              	  	"advert" => 0			//decides which advert to show on the front page based on the selected language of the website.
	            ];

                global $local_VisitsInWebstore, $Segments, $local_Language, $local_OS;

                if( $VisitsInWebstore >= 30){			//High-priority customer based on number of visits on the site
                    	$Segments["priorityHigh"] = 1;
                } 

		if(strcmp($local_OS, "iphone") == 0){		//If already owns an expensive phone, prioritize expensive phone offers
			$Segments["expensivePhones"] = 1;
		}

                if($local_Language == 1){   			//Decides which advert to show, $local_language with value 1 for finnish, 2 for ruskiy
                    $Segments["advert"] = 1; 			//value 1 finnish default advert
                }
                else if($local_Language == 2){
                    $Segments["advert"] = 2; 			//value 2 russian default advert
                }

		if($Segments["expensivePhones"] == 1 && $Segments["priorityHigh"] == 1){	//if has expensive phone and his priority is high, he is considered highSpender
			$Segments["highSpender"] == 1;
		}

		return $Segments;
            }

            public function trackBrowsingSpeed(){
                //options for tracking browsing times on a certain page
                //and multiple quick changes of page
            }

            public function launchHelper(){
                //result of fast page changing in the webstore
            }
	}


